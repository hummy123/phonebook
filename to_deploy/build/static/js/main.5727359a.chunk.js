(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(19),s=n.n(a),o=n(1),u=n.n(o),i=n(4),l=n(5),b=n(10),p=n(0),j=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:e.object.label}),Object(p.jsx)("input",{value:e.object.value,onChange:function(t){return e.object.setValue(t.target.value)}})]})},f=n(7),d=n.n(f),h="/api/persons",v={getAll:function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get(h);case 3:return e.abrupt("return",e.sent.data);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.put("".concat(h,"/").concat(t.id),t);case 3:return e.abrupt("return",e.sent.data);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),savePerson:function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post(h,t);case 3:return e.abrupt("return",e.sent.data);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.delete("".concat(h,"/").concat(t));case 3:return e.abrupt("return",e.sent.data);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){var t=e.object.persons,n=e.object.setPersons,c=e.object.notify,a=Object(r.useState)(""),s=Object(l.a)(a,2),o=s[0],f=s[1],d={label:"name",value:o,setValue:f},h=Object(r.useState)(""),x=Object(l.a)(h,2),O=x[0],m=x[1],w={label:"number",value:O,setValue:m},k=function(){var e=Object(i.a)(u.a.mark((function e(r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=g()){e.next=20;break}return s={name:o,number:O},e.prev=4,e.next=7,v.savePerson(s);case 7:return n(t.concat(s)),e.next=10,c("".concat(s.name,"'s contact details have been added!"));case 10:f(""),m(""),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(4),e.next=18,c(e.t0.response.data.error);case 18:e.next=22;break;case 20:return e.next=22,y(a);case 22:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to update ".concat(o,"'s number?"))){e.next=21;break}return a=Object(b.a)(Object(b.a)({},r),{},{number:O}),e.prev=2,e.next=5,v.updatePerson(a);case 5:return e.next=7,c("".concat(a.name,"'s contact details have been updated!"));case 7:n(t.map((function(e){return e.id!==a.id?e:a}))),e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(2),"malformed id"!==e.t0.response.data.error){e.next=19;break}return e.next=16,c("The contact you are trying to update has been deleted!");case 16:n(t.filter((function(e){return e.id!==a.id?e:void 0}))),e.next=21;break;case 19:return e.next=21,c(e.t0.response.data.error);case 21:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){return t.find((function(e){return e.name===o}))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Add a person"}),Object(p.jsxs)("form",{onSubmit:k,children:[Object(p.jsx)(j,{object:d}),Object(p.jsx)(j,{object:w}),Object(p.jsx)("button",{type:"submit",children:"add"})]})]})},O=n(20),m=function(e){var t=e.person,n=e.object,r=n.persons,c=n.setPersons,a=n.notify,s=function(){var e=Object(i.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(t.name,"?"))){e.next=6;break}return e.next=3,v.deletePerson(n);case 3:s=Object(O.a)(r).filter((function(e){return e.id!==n?e:void 0})),c(s),a("You have deleted ".concat(t.name,"'s contact."));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("li",{children:["Name: ",t.name," Number: ",t.number,Object(p.jsx)("button",{onClick:function(){return s(t.id)},children:"Delete"})]})},w=function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"People"}),Object(p.jsx)("ul",{children:e.persons.map((function(t){return Object(p.jsx)(m,{person:t,object:e.object},t.name)}))})]})},k=function(e){var t=e.object,n=t.setFilterPeople,c=t.persons,a=Object(r.useState)(""),s=Object(l.a)(a,2),o=s[0],u=s[1];Object(r.useEffect)((function(){n(c.filter((function(e){var t=e.name.toLowerCase(),n=o.toLowerCase();return t.includes(n)?e:void 0})))}),[o,n,c]);var i={label:"name",value:o,setValue:u};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Filter list"}),Object(p.jsx)(j,{object:i})]})},y=function(e){var t=e.message;return null===t?null:Object(p.jsx)("div",{className:"error",children:t})},g=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(l.a)(a,2),o=s[0],b=s[1],j=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t),setTimeout((function(){b(null)}),5e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,v.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var f={persons:n,setPersons:c,notify:j},d=Object(r.useState)(n),h=Object(l.a)(d,2),O=h[0],m={persons:n,setFilterPeople:h[1]};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Phonebook"}),Object(p.jsx)(y,{message:o}),Object(p.jsx)(k,{object:m}),Object(p.jsx)(w,{persons:O,object:f}),Object(p.jsx)(x,{object:f})]})};n(45);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.5727359a.chunk.js.map